## API Report File for "@opensouls/engine"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts

import { DeveloperInteractionRequest } from '@opensouls/core';
import { InternalPerception } from '@opensouls/core';
import { Json } from '@opensouls/core';
import { Perception } from '@opensouls/core';
import { SoulEnvironment } from '@opensouls/core';
import { WorkingMemory } from '@opensouls/core';

// @public (undocumented)
export const ALLOWED_RAG_FILE_EXTENSIONS: string[];

// @public (undocumented)
export interface Blueprint {
    // (undocumented)
    context: string;
    // (undocumented)
    defaultEnvironment?: SoulEnvironment;
    // (undocumented)
    entity: string;
    // (undocumented)
    initialProcess: MentalProcess<any>;
    // (undocumented)
    mentalProcesses: MentalProcess<any>[];
    // (undocumented)
    name: string;
    // (undocumented)
    perceptionProcessor?: PerceptionProcessor;
    // (undocumented)
    subprocesses?: MentalProcess<any>[];
}

// @public (undocumented)
export type CognitiveEvent = CognitiveEventAbsolute | CognitiveEventOffset;

// @public (undocumented)
export interface CognitiveEventAbsolute extends CognitiveEventBase {
    // (undocumented)
    when: Date;
}

// @public (undocumented)
export interface CognitiveEventBase {
    // (undocumented)
    params?: Json;
    // (undocumented)
    perception: Omit<InternalPerception, "_id" | "_kind" | "_pending" | "_timestamp" | "internal">;
    // (undocumented)
    process: MentalProcess<any>;
}

// @public (undocumented)
export interface CognitiveEventOffset extends CognitiveEventBase {
    // (undocumented)
    in: number;
}

// @public (undocumented)
export interface DefaultActions {
    // (undocumented)
    dispatch: (evt: DeveloperInteractionRequest) => void;
    // (undocumented)
    expire: () => void;
    // (undocumented)
    log: (...args: any) => void;
    // (undocumented)
    scheduleEvent: (evt: CognitiveEvent) => void;
    // (undocumented)
    speak: (message: AsyncIterable<string> | string) => void;
}

// @public (undocumented)
export const defaultRagBucketName: (blueprint: string) => string;

// @public (undocumented)
export type Embedding = number[];

// @public (undocumented)
export type MentalProcess<ParamType = Record<number | string, any>, CortexStepType = any> = (args: MentalProcessArguments<ParamType, CortexStepType>) => Promise<MentalProcessReturnTypes<CortexStepType, ParamType>>;

// @public (undocumented)
export interface MentalProcessArguments<ParamType, CortexStepType = any> {
    // (undocumented)
    params: ParamType;
    // (undocumented)
    step: CortexStepType;
    // (undocumented)
    workingMemory: WorkingMemory;
}

// @public (undocumented)
export interface MentalProcessReturnOptions<ParamType> {
    // (undocumented)
    executeNow?: boolean;
    // (undocumented)
    params?: ParamType;
}

// @public (undocumented)
export type MentalProcessReturnTypes<CortexStepType, ParamType = any> = CortexStepType | WorkingMemory | [WorkingMemory, MentalProcess<ParamType>] | [WorkingMemory, MentalProcess<ParamType>, MentalProcessReturnOptions<ParamType>];

// @public (undocumented)
export type PerceptionProcessor = <PropType>(perceptionArgs: {
    perception: Perception;
    currentProcess: MentalProcess<any>;
    workingMemory: WorkingMemory;
}) => Promise<PerceptionProcessorReturnTypes<PropType>>;

// @public (undocumented)
export type PerceptionProcessorReturnTypes<PropType = any> = undefined | [WorkingMemory] | [WorkingMemory, MentalProcess<PropType>] | [WorkingMemory, MentalProcess<PropType>, PropType];

// @public (undocumented)
export interface RagConfigfile {
    // (undocumented)
    bucket: string;
}

// @public (undocumented)
export interface RagIngestionBody {
    // (undocumented)
    content: string;
    // (undocumented)
    contentType?: string;
    // (undocumented)
    maxTokens?: number;
    // (undocumented)
    metadata?: VectorMetadata;
    // (undocumented)
    rootKey: string;
}

// @public (undocumented)
export interface RagSearchOpts {
    // (undocumented)
    bucketName?: string;
    // (undocumented)
    limit?: number;
    // (undocumented)
    maxDistance?: number;
    // (undocumented)
    query: Embedding | string;
}

// @public (undocumented)
export interface SoulConfig {
    // (undocumented)
    path?: string;
    // (undocumented)
    paths?: string[];
    // (undocumented)
    soul: string;
}

// @public
export interface SoulHooks {
    // (undocumented)
    useActions: () => DefaultActions;
    // (undocumented)
    useBlueprintStore: (bucketName?: string) => VectorStoreHook;
    // (undocumented)
    useOrganizationStore: (bucketName?: string) => VectorStoreHook;
    // (undocumented)
    usePerceptions: () => {
        invokingPerception: Perception | null | undefined;
        pendingPerceptions: {
            current: Perception[];
        };
    };
    // (undocumented)
    useProcessManager: () => {
        invocationCount: number;
        setNextProcess: <PropType>(process: MentalProcess<PropType>, props?: PropType) => void;
        wait: (ms: number) => Promise<void>;
        previousMentalProcess?: MentalProcess<any>;
    };
    // (undocumented)
    useProcessMemory: <T = null>(initialValue: T) => {
        current: T;
    };
    // (undocumented)
    useRag(bucketName?: string): {
        search: (opts: RagSearchOpts) => Promise<VectorRecordWithDistance[]>;
        withRagContext: <T = any>(step: T, opts?: WithRagContextOpts) => Promise<T>;
    };
    // (undocumented)
    useSoulMemory: <T = null>(name: string, initialValue?: T) => {
        current: T;
    };
    // (undocumented)
    useSoulStore: () => SoulVectorStoreHook;
    // (undocumented)
    useTool<ParamType = Json, ResponseType = Json>(name: string): (params: ParamType) => Promise<ResponseType>;
}

// @public (undocumented)
export interface SoulStoreGetOpts {
    // (undocumented)
    includeMetadata?: boolean;
}

// @public (undocumented)
export interface SoulVectorStoreHook extends Omit<VectorStoreHook, "get"> {
    // @deprecated (undocumented)
    get: <T = unknown>(key: string, opts?: SoulStoreGetOpts) => (typeof opts extends {
        includeMetadata: true;
    } ? VectorRecord : T) | undefined;
}

// @public (undocumented)
export const useActions: SoulHooks["useActions"];

// @public (undocumented)
export const useBlueprintStore: SoulHooks["useBlueprintStore"];

// @public (undocumented)
export const useOrganizationStore: SoulHooks["useOrganizationStore"];

// @public (undocumented)
export const usePerceptions: SoulHooks["usePerceptions"];

// @public (undocumented)
export const useProcessManager: SoulHooks["useProcessManager"];

// @public (undocumented)
export const useProcessMemory: SoulHooks["useProcessMemory"];

// @public (undocumented)
export const useRag: (bucketName?: string) => {
    search: (opts: RagSearchOpts) => Promise<VectorRecordWithDistance[]>;
    withRagContext: <T = any>(step: T, opts?: WithRagContextOpts) => Promise<T>;
};

// @public (undocumented)
export const useSoulMemory: SoulHooks["useSoulMemory"];

// @public (undocumented)
export const useSoulStore: SoulHooks["useSoulStore"];

// @public (undocumented)
export const useTool: <ParamType = Json, ResponseType = Json>(toolName: string) => (params: ParamType) => Promise<ResponseType>;

// @public (undocumented)
export type VectorMetadata = Record<string, Json>;

// @public (undocumented)
export interface VectorRecord {
    // (undocumented)
    content: Json;
    // (undocumented)
    embedding?: Embedding;
    // (undocumented)
    key: string;
    // (undocumented)
    metadata: VectorMetadata;
}

// @public (undocumented)
export interface VectorRecordWithDistance extends VectorRecord {
    // (undocumented)
    distance: number;
    // (undocumented)
    similarity: number;
}

// @public @deprecated (undocumented)
export type VectorRecordWithSimilarity = VectorRecordWithDistance;

// @public (undocumented)
export interface VectorStoreHook {
    // (undocumented)
    createEmbedding: (content: string, model?: string) => Promise<Embedding>;
    // (undocumented)
    delete: (key: string) => void;
    // (undocumented)
    fetch: <T = unknown>(key: string, opts?: SoulStoreGetOpts) => Promise<(typeof opts extends {
        includeMetadata: true;
    } ? VectorRecord : T) | undefined>;
    // (undocumented)
    search: (query: Embedding | string, opts?: VectorStorSearchOpts) => Promise<VectorRecordWithDistance[]>;
    // (undocumented)
    set: (key: string, value: Json, metadata?: VectorMetadata, model?: string) => void;
}

// @public (undocumented)
export interface VectorStorSearchOpts {
    // (undocumented)
    filter?: VectorMetadata;
    // (undocumented)
    maxDistance?: number;
    // (undocumented)
    minSimilarity?: number;
    // (undocumented)
    model?: string;
    // (undocumented)
    resultLimit?: number;
}

// @public (undocumented)
export interface WithRagContextOpts {
}


export * from "@opensouls/core";
export * from "@opensouls/soul";

// (No @packageDocumentation comment for this package)

```
